{"version":3,"sources":["common.js"],"names":["ready","fn","document","readyState","addEventListener","attachEvent","gAddEvent","obj","evt","gRemoveEvent","removeEventListener","detachEvent","gAddClass","el","className","classList","add","gRemoveClass","remove","replace","RegExp","split","join","gHasClass","contains","test","gToggleClass","toggle","classes","existingIndex","indexOf","splice","push","gArrayRemoveClass","forEach","call","element","index","array","gArrayAddClass","isIntoScreen","elementTop","getBoundingClientRect","top","elementBottom","bottom","id","window","innerHeight","urlHash","hash","location","navCurrent","getElementsByClassName","length","getElementById","throttle","type","name","running","func","requestAnimationFrame","dispatchEvent","CustomEvent","navBar","navBarHeight","navLimit","scrollEvt","e","applicationCache","status","UPDATEREADY","console","info","swapCache","reload","cb","l","createElement","rel","href","h","getElementsByTagName","parentNode","insertBefore","raf","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","tuckedMenu","toggleMenu","height","coverVideo","innerWidth","preload","autoplay","log","play","body","coolSentences","coverSubtitle","textContent","Math","floor","random","createEvent","pageYOffset"],"mappings":"AAAA,QAASA,OAAMC,GACc,WAAvBC,SAASC,WACXF,IACSC,SAASE,iBAClBF,SAASE,iBAAiB,mBAAoBH,GAE9CC,SAASG,YAAY,qBAAsB,WACd,WAAvBH,SAASC,YACXF,MAKR,QAASK,WAAUC,EAAKC,EAAKP,GACxBM,EAAIH,iBACPG,EAAIH,iBAAiBI,EAAIP,GAAG,GACpBM,EAAIF,aACZE,EAAIF,YAAY,KAAKG,EAAIP,GAG3B,QAASQ,cAAaF,EAAKC,EAAKP,GAC3BM,EAAIG,oBACPH,EAAIG,oBAAoBF,EAAIP,GAAG,GACvBM,EAAII,aACZJ,EAAII,YAAY,KAAKH,EAAIP,GAG3B,QAASW,WAAUC,EAAIC,GACnBD,EAAGE,UACLF,EAAGE,UAAUC,IAAIF,GAEjBD,EAAGC,WAAa,IAAMA,EAGxB,QAASG,cAAaJ,EAAIC,GACrBD,EAAGE,UACNF,EAAGE,UAAUG,OAAOJ,GAEpBD,EAAGC,UAAYD,EAAGC,UAAUK,QAAQ,GAAIC,QAAO,UAAYN,EAAUO,MAAM,KAAKC,KAAK,KAAO,UAAW,MAAO,KAGhH,QAASC,WAAUV,EAAIC,GACtB,MAAID,GAAGE,UACCF,EAAGE,UAAUS,SAASV,GAEtB,GAAIM,QAAO,QAAUN,EAAY,QAAS,MAAMW,KAAKZ,EAAGC,WAGjE,QAASY,cAAab,EAAIC,GACxB,GAAID,EAAGE,UACLF,EAAGE,UAAUY,OAAOb,OACf,CACL,GAAIc,GAAUf,EAAGC,UAAUO,MAAM,KAC7BQ,EAAgBD,EAAQE,QAAQhB,EAEhCe,IAAiB,EACnBD,EAAQG,OAAOF,EAAe,GAE9BD,EAAQI,KAAKlB,GAEfD,EAAGC,UAAYc,EAAQN,KAAK,MAIhC,QAASW,mBAAmBpB,EAAIC,MAC5BoB,QAAQC,KAAKtB,EAAI,SAASuB,EAASC,EAAOC,GAC5CrB,aAAamB,EAAStB,KAIxB,QAASyB,gBAAe1B,EAAIC,MACxBoB,QAAQC,KAAKtB,EAAI,SAASuB,EAASC,EAAOC,GAC5C1B,UAAUwB,EAAStB,KA0BrB,QAAS0B,cAAcJ,GACnB,GAAIK,GAAaL,EAAQM,wBAAwBC,IAC7CC,EAAgBR,EAAQM,wBAAwBG,MAGpD,OAAiB,YAAdT,EAAQU,GAAuC,IAAdL,GAAoBG,GAAiB,GACnD,QAAdR,EAAQU,GAAmC,IAAdL,GAAkC,IAAdG,GAAqBG,OAAOC,YACzEP,GAAcM,OAAOC,aAAeJ,GAAiBG,OAAOC,YAAY,EAGxF,QAASC,WACP,GAAIC,GAAOH,OAAOI,SAASD,KACvBE,EAAalD,SAASmD,uBAAuB,eAC9CD,GAAWE,QACZrC,aAAamC,EAAW,GAAI,gBAE1BF,GAAgB,KAARA,EACI,aAARA,EAAqBtC,UAAUV,SAASqD,eAAe,iBAAkB,gBACjE,SAARL,EAAiBtC,UAAUV,SAASqD,eAAe,aAAc,gBACzD,YAARL,GAAoBtC,UAAUV,SAASqD,eAAe,gBAAiB,gBAHtDR,OAAOI,SAASD,KAAO,MArCjD,WACG,GAAIM,GAAW,SAASC,EAAMC,EAAMnD,GAEhC,GAAIA,GAAMA,GAAOwC,OACbY,GAAU,EACVC,EAAO,WACHD,IACJA,GAAU,EACVE,sBAAsB,WAClBtD,EAAIuD,cAAc,GAAIC,aAAYL,IAClCC,GAAU,KAGlBpD,GAAIH,iBAAiBqD,EAAMG,GAI/BJ,GAAU,SAAU,YACpBA,EAAS,SAAU,cA0BvB,IAAIQ,QAAQC,aAAcC,SAAUC,SAEpC7D,WAAUyC,OAAQ,OAAQ,SAAUqB,GAEhC9D,UAAUyC,OAAOsB,iBAAkB,cAAe,SAAUD,GACtDrB,OAAOsB,iBAAiBC,QAAUvB,OAAOsB,iBAAiBE,cAC1DC,QAAQC,KAAK,6BACb1B,OAAOsB,iBAAiBK,YACxB3B,OAAOI,SAASwB,aAM1B,IAAIC,IAAK,WACP,GAAIC,GAAI3E,SAAS4E,cAAc,OAASD,GAAEE,IAAM,aAChDF,EAAEG,KAAO,qBACT,IAAIC,GAAI/E,SAASgF,qBAAqB,QAAQ,EAAID,GAAEE,WAAWC,aAAaP,EAAGI,IAE7EI,IAAMxB,uBAAyByB,0BAC/BC,6BAA+BC,uBAC/BH,KAAKA,IAAIT,IACR7B,OAAO3C,iBAAiB,OAAQwE,IAErC5E,MAAM,WAEF,GAAIyF,GAAYvF,SAASqD,eAAe,cACpCmC,EAAaxF,SAASqD,eAAe,SACzCS,QAAS9D,SAASqD,eAAe,UACjCU,aAAeD,OAAOtB,wBAAwBiD,OAC9CzB,SAAWnB,OAAOC,YAAciB,aAEhChB,SAGA,IAAI2C,GAAa1F,SAASgF,qBAAqB,SAAS,EACpDnC,QAAO8C,YAAc,MACvBD,EAAWE,QAAU,OACrBF,EAAWG,SAAW,OACtBzF,UAAUsF,EAAY,aAAc,WAClCpB,QAAQwB,IAAI,iBACZJ,EAAWK,OACXrF,UAAUV,SAASgG,KAAM,aAG3BtF,UAAUV,SAASgG,KAAM,SAI3B,IAAIC,IACF,4DACA,4GACA,oDACA,iDAEEC,EAAgBlG,SAASqD,eAAe,iBAC5C6C,GAAcC,YAAcF,EAAcG,KAAKC,MAAsB,EAAhBD,KAAKE,SAAqB,IAG/ElG,UAAUJ,SAASqD,eAAe,UAAW,QAAS,SAAUa,GAC5D1C,aAAa+D,EAAY,aACzB/D,aAAagE,EAAY,KACzBzB,aAAeD,OAAOtB,wBAAwBiD,OAC9CzB,SAAWnB,OAAOC,YAAciB,eAGZE,UAApBpB,OAAOgB,YAAyB,GAAIA,aAAY,YACnC7D,SAASuG,YAAY,YAEtCnG,UAAUyC,OAAQ,WAAY,SAASqB,GAChCrB,OAAO2D,YAAcxC,SAChB3C,UAAUyC,OAAQ,mBAClBpD,UAAUoD,OAAQ,kBAEnBzC,UAAUyC,OAAQ,mBACjB/C,aAAa+C,OAAQ,iBAG7B,IAAIZ,GAAalD,SAASmD,uBAAuB,eAC9CD,GAAWE,QACZrC,aAAamC,EAAW,GAAI,gBAE3BZ,aAAatC,SAASqD,eAAe,aACpC3C,UAAUV,SAASqD,eAAe,iBAAkB,gBAC9Cf,aAAatC,SAASqD,eAAe,SAC3C3C,UAAUV,SAASqD,eAAe,aAAc,gBAC1Cf,aAAatC,SAASqD,eAAe,aAC3C3C,UAAUV,SAASqD,eAAe,gBAAiB,kBAI3DjD,UAAUyC,OAAQ,WAAY,WAC1BkB,aAAeD,OAAOtB,wBAAwBiD,OAC9CzB,SAAWnB,OAAOC,YAAciB,aAEhClB,OAAOe,cAAcK,aAGzB7D,UAAUyC,OAAQ,aAAc,WAC5BE,YAGJuB,QAAQC,KAAK","file":"common.js","sourcesContent":["function ready(fn) {\n  if (document.readyState != 'loading'){\n    fn();\n  } else if (document.addEventListener) {\n    document.addEventListener('DOMContentLoaded', fn);\n  } else {\n    document.attachEvent('onreadystatechange', function() {\n      if (document.readyState != 'loading')\n        fn();\n    });\n  }\n}\n\nfunction gAddEvent(obj, evt, fn) {\n\tif (obj.addEventListener)\n\t\tobj.addEventListener(evt,fn,false);\n\telse if (obj.attachEvent)\n\t\tobj.attachEvent('on'+evt,fn);\n}\n\nfunction gRemoveEvent(obj, evt, fn) {\n\tif (obj.removeEventListener)\n\t\tobj.removeEventListener(evt,fn,false);\n\telse if (obj.detachEvent)\n\t\tobj.detachEvent('on'+evt,fn);\n}\n\nfunction gAddClass(el, className) {\n\tif(el.classList)\n\t\tel.classList.add(className);\n\telse\n\t\tel.className += ' ' + className;\n}\n\nfunction gRemoveClass(el, className) {\n\tif (el.classList)\n\t\tel.classList.remove(className);\n\telse\n\t\tel.className = el.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\n}\n\nfunction gHasClass(el, className){\n\tif (el.classList)\n\t\treturn el.classList.contains(className);\n\telse\n\t\treturn new RegExp('(^| )' + className + '( |$)', 'gi').test(el.className);\n}\n\nfunction gToggleClass(el, className) {\n  if (el.classList) {\n    el.classList.toggle(className);\n  } else {\n    var classes = el.className.split(' ');\n    var existingIndex = classes.indexOf(className);\n\n    if (existingIndex >= 0)\n      classes.splice(existingIndex, 1);\n    else\n      classes.push(className);\n\n    el.className = classes.join(' ');\n  }\n}\n\nfunction gArrayRemoveClass (el, className){\n\t[].forEach.call(el, function(element, index, array) {\n\t\tgRemoveClass(element, className);\n\t});\n}\n\nfunction gArrayAddClass(el, className){\n\t[].forEach.call(el, function(element, index, array) {\n\t\tgAddClass(element, className);\n\t});\n}\n\n// OP events function\n;(function() {\n    var throttle = function(type, name, obj) {\n        /* jshint shadow:true */\n        var obj = obj || window;\n        var running = false;\n        var func = function() {\n            if (running) { return; }\n            running = true;\n            requestAnimationFrame(function() {\n                obj.dispatchEvent(new CustomEvent(name));\n                running = false;\n            });\n        };\n        obj.addEventListener(type, func);\n    };\n\n    /* init events */\n    throttle (\"scroll\", \"opScroll\");\n    throttle(\"resize\", \"opResize\");\n})();\n\nfunction isIntoScreen( element ) {\n    var elementTop = element.getBoundingClientRect().top,\n        elementBottom = element.getBoundingClientRect().bottom;\n\n    // console.log(element.id, elementTop, elementBottom, window.innerHeight);\n    if(element.id == \"about-me\") return elementTop <= 50 && elementBottom >= 50;\n    else if(element.id == \"work\") return elementTop <= 50 && elementBottom*1.2 >= window.innerHeight;\n    else return elementTop <= window.innerHeight && elementBottom >= window.innerHeight-3;\n}\n\nfunction urlHash() {\n  var hash = window.location.hash;\n  var navCurrent = document.getElementsByClassName('nav__current');\n  if(navCurrent.length)\n    gRemoveClass(navCurrent[0], 'nav__current');\n\n  if(!hash || hash == '#') window.location.hash = '#!';\n  else if(hash == '#about-me') gAddClass(document.getElementById('menu-about-me'), 'nav__current');\n  else if(hash == '#work') gAddClass(document.getElementById('menu-work'), 'nav__current');\n  else if(hash == '#contact') gAddClass(document.getElementById('menu-contact'), 'nav__current');\n}\n\n// MAIN\nvar navBar, navBarHeight, navLimit, scrollEvt;\n\ngAddEvent(window, 'load', function (e) {\n    // Check if new cache available\n    gAddEvent(window.applicationCache, 'updateready', function (e) {\n      if (window.applicationCache.status == window.applicationCache.UPDATEREADY) {\n          console.info('New web version available');\n          window.applicationCache.swapCache();\n          window.location.reload();\n      }\n    });\n});\n\n// defer CSS loading\nvar cb = function() {\n  var l = document.createElement('link'); l.rel = 'stylesheet';\n  l.href = 'styles/main.min.css';\n  var h = document.getElementsByTagName('head')[0]; h.parentNode.insertBefore(l, h);\n};\nvar raf = requestAnimationFrame || mozRequestAnimationFrame ||\n    webkitRequestAnimationFrame || msRequestAnimationFrame;\nif (raf) raf(cb);\nelse window.addEventListener('load', cb);\n\nready(function(){\n\n    var tuckedMenu= document.getElementById('tuckedMenu');\n    var toggleMenu = document.getElementById('toggle');\n    navBar = document.getElementById('navBar');\n    navBarHeight = navBar.getBoundingClientRect().height;\n    navLimit = window.innerHeight - navBarHeight;\n\n    urlHash();\n\n    // Video\n    var coverVideo = document.getElementsByTagName(\"video\")[0];\n    if (window.innerWidth >= 1024) {\n      coverVideo.preload = \"true\";\n      coverVideo.autoplay = \"true\";\n      gAddEvent(coverVideo, 'loadeddata', function(){\n        console.log(\"Video: loaded\");\n        coverVideo.play();\n        gAddClass(document.body, 'loaded');\n      });\n    } else {\n      gAddClass(document.body, 'loaded');\n    }\n\n    // Random cover sentence\n    var coolSentences = [\n      \"Programmer - an organism that turns coffee into software.\",\n      \"Programming is like sex. One mistake and you have to support it for the rest of your life. - Michael Sinz\",\n      \"Talk is cheap. Show me the code. - Linus Torvalds\",\n      \"It's not a bug. It's an undocumented feature.\"\n    ];\n    var coverSubtitle = document.getElementById('cover-subtitle');\n    coverSubtitle.textContent = coolSentences[Math.floor(Math.random() * (4 - 0) + 0)];\n\n    // Navigation & scroll\n    gAddEvent(document.getElementById('toggle'), 'click', function (e) {\n        gToggleClass(tuckedMenu, 'nav__open');\n        gToggleClass(toggleMenu, 'x');\n        navBarHeight = navBar.getBoundingClientRect().height;\n        navLimit = window.innerHeight - navBarHeight;\n    });\n\n    if (window.CustomEvent) scrollEvt = new CustomEvent('opScroll');\n    else scrollEvt = document.createEvent('opScroll'); //shitty IE\n\n    gAddEvent(window, 'opScroll', function(e){\n        if(window.pageYOffset > navLimit) {\n            if(!gHasClass(navBar, 'nav-background'))\n                gAddClass(navBar, 'nav-background');\n        } else {\n            if(gHasClass(navBar, 'nav-background'))\n                gRemoveClass(navBar, 'nav-background');\n        }\n\n        var navCurrent = document.getElementsByClassName('nav__current');\n        if(navCurrent.length)\n          gRemoveClass(navCurrent[0], 'nav__current');\n\n        if(isIntoScreen(document.getElementById('about-me'))) {\n            gAddClass(document.getElementById('menu-about-me'), 'nav__current');\n        } else if(isIntoScreen(document.getElementById('work'))) {\n            gAddClass(document.getElementById('menu-work'), 'nav__current');\n        } else if(isIntoScreen(document.getElementById('contact'))) {\n            gAddClass(document.getElementById('menu-contact'), 'nav__current');\n        }\n    });\n\n    gAddEvent(window, 'opResize', function(){\n        navBarHeight = navBar.getBoundingClientRect().height;\n        navLimit = window.innerHeight - navBarHeight;\n\n        window.dispatchEvent(scrollEvt);\n    });\n\n    gAddEvent(window, 'hashchange', function(){\n        urlHash();\n    });\n\n    console.info(\"Welcome\");\n\n});\n"],"sourceRoot":"/source/"}